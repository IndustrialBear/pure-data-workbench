#N canvas 153 22 660 379 10;
#X obj 16 88 r~ 1-nothing;
#X obj 119 88 r~ 1-nothing;
#X obj 16 68 r \$1-\$2L-r;
#X obj 119 68 r \$1-\$2R-r;
#X obj 119 288 s~ \$1-\$2R;
#X obj 16 288 s~ \$1-\$2L;
#N canvas 55 76 1034 657 fft 0;
#X obj 18 500 *~;
#X obj 291 455 *~;
#X obj 258 454 *~;
#X obj 356 456 *~;
#X obj 324 455 *~;
#X obj 324 477 +~;
#X obj 258 479 -~;
#X obj 560 383 *~;
#X obj 54 124 *~;
#X obj 22 124 *~;
#X obj 22 145 +~;
#X obj 325 82 *~;
#X obj 293 82 *~;
#X obj 608 312 *~;
#X obj 576 312 *~;
#X obj 93 63 *~;
#X obj 18 522 outlet~;
#X obj 18 475 *~;
#X obj 126 63 inlet~;
#X obj 93 84 rfft~;
#X obj 18 451 rifft~;
#X obj 576 334 rsqrt~;
#X obj 293 103 +~;
#X obj 484 383 *~;
#X obj 56 499 sig~ 0.0002;
#N canvas 167 161 711 408 decision 0;
#X obj 49 101 inlet~;
#X obj 50 341 outlet~;
#X obj 50 183 -~;
#X obj 50 226 clip~ 0 1;
#X obj 50 204 *~ 1e+20;
#X obj 196 98 inlet~;
#X text 137 213 stronger than;
#X text 139 228 old one;
#X obj 274 202 -~;
#X obj 288 177 lrshift~ 1;
#X obj 274 250 clip~ 0 1;
#X obj 274 228 *~ 1e+20;
#X obj 450 202 -~;
#X obj 450 250 clip~ 0 1;
#X obj 450 228 *~ 1e+20;
#X obj 464 177 lrshift~ -1;
#X obj 50 283 *~;
#X obj 50 312 *~;
#X text 135 199 1 if new signal;
#X text 55 73 new;
#X text 203 70 old;
#X text 51 12 Choose whether to replace the "lod" signal with the "new"
one. The "new" one must be stronger than the old one and also must
be stronger than its two neighboring channels;
#X text 267 283 1 if we're louder than neighbor;
#X connect 0 0 2 0;
#X connect 0 0 9 0;
#X connect 0 0 8 0;
#X connect 0 0 12 0;
#X connect 0 0 15 0;
#X connect 2 0 4 0;
#X connect 3 0 16 0;
#X connect 4 0 3 0;
#X connect 5 0 2 1;
#X connect 8 0 11 0;
#X connect 9 0 8 1;
#X connect 10 0 16 1;
#X connect 11 0 10 0;
#X connect 12 0 14 0;
#X connect 13 0 17 1;
#X connect 14 0 13 0;
#X connect 15 0 12 1;
#X connect 16 0 17 0;
#X connect 17 0 1 0;
#X restore 23 172 pd decision;
#X obj 576 356 *~;
#N canvas 276 479 771 379 divide-by-prev 0;
#X obj 283 99 inlet~;
#X obj 385 101 inlet~;
#X obj 284 249 outlet~;
#X obj 386 249 outlet~;
#X obj 107 251 outlet~;
#X obj 208 253 outlet~;
#X obj 250 180 *~;
#X obj 217 180 *~;
#X obj 182 181 *~;
#X obj 149 181 *~;
#X obj 149 203 +~;
#X obj 217 202 -~;
#X obj 92 49 tabreceive~ \$0-last-real;
#X obj 190 72 tabreceive~ \$0-last-imag;
#X connect 0 0 2 0;
#X connect 0 0 9 0;
#X connect 0 0 6 0;
#X connect 1 0 3 0;
#X connect 1 0 8 0;
#X connect 1 0 7 0;
#X connect 6 0 11 1;
#X connect 7 0 11 0;
#X connect 8 0 10 1;
#X connect 9 0 10 0;
#X connect 10 0 4 0;
#X connect 11 0 5 0;
#X connect 12 0 9 1;
#X connect 12 0 7 1;
#X connect 13 0 8 1;
#X connect 13 0 6 1;
#X restore 603 192 pd divide-by-prev;
#N canvas 650 183 618 343 switch 0;
#X obj 19 163 inlet~;
#X obj 107 99 inlet~;
#X obj 169 100 inlet~;
#X obj 273 97 inlet~;
#X obj 333 97 inlet~;
#X obj 367 185 -~;
#X obj 338 231 +~;
#X obj 372 229 *~;
#X obj 250 182 -~;
#X obj 220 228 +~;
#X obj 254 228 *~;
#X obj 219 278 outlet~;
#X obj 338 274 outlet~;
#X connect 0 0 10 1;
#X connect 0 0 7 1;
#X connect 1 0 8 0;
#X connect 2 0 5 0;
#X connect 3 0 9 0;
#X connect 3 0 8 1;
#X connect 4 0 6 0;
#X connect 4 0 5 1;
#X connect 5 0 7 0;
#X connect 6 0 12 0;
#X connect 7 0 6 1;
#X connect 8 0 10 0;
#X connect 9 0 11 0;
#X connect 10 0 9 1;
#X restore 327 275 pd switch;
#N canvas 650 183 614 339 switch 0;
#X obj 19 163 inlet~;
#X obj 107 99 inlet~;
#X obj 169 100 inlet~;
#X obj 273 97 inlet~;
#X obj 333 97 inlet~;
#X obj 367 185 -~;
#X obj 338 231 +~;
#X obj 372 229 *~;
#X obj 250 182 -~;
#X obj 220 228 +~;
#X obj 254 228 *~;
#X obj 219 278 outlet~;
#X obj 338 274 outlet~;
#X connect 0 0 10 1;
#X connect 0 0 7 1;
#X connect 1 0 8 0;
#X connect 2 0 5 0;
#X connect 3 0 9 0;
#X connect 3 0 8 1;
#X connect 4 0 6 0;
#X connect 4 0 5 1;
#X connect 5 0 7 0;
#X connect 6 0 12 0;
#X connect 7 0 6 1;
#X connect 8 0 10 0;
#X connect 9 0 11 0;
#X connect 10 0 9 1;
#X restore 484 266 pd switch;
#X obj 54 476 tabreceive~ \$0-hann;
#X obj 94 35 tabreceive~ \$0-hann;
#X obj 505 112 tabreceive~ \$0-inc-real;
#X obj 587 134 tabreceive~ \$0-inc-imag;
#X obj 752 220 tabsend~ \$0-last-imag;
#X obj 702 243 tabsend~ \$0-last-real;
#X obj 559 426 tabsend~ \$0-inc-imag;
#X obj 484 449 tabsend~ \$0-inc-real;
#X msg 800 433 set \$1 4;
#X obj 800 455 block~;
#X obj 655 341 expr 1 - 0.2/max(0.2 \, $f1);
#X obj 367 26 tabreceive~ \$0-amp-real;
#X obj 443 50 tabreceive~ \$0-amp-imag;
#X obj 325 537 tabsend~ \$0-amp-imag;
#X obj 258 560 tabsend~ \$0-amp-real;
#X obj 506 134 +~ 1e-15;
#X obj 366 50 +~ 1e-15;
#X obj 655 270 inlet;
#X obj 800 413 r \$0-window-size;
#X connect 0 0 16 0;
#X connect 1 0 6 1;
#X connect 2 0 6 0;
#X connect 3 0 5 1;
#X connect 4 0 5 0;
#X connect 5 0 43 0;
#X connect 6 0 44 0;
#X connect 7 0 1 0;
#X connect 7 0 3 0;
#X connect 7 0 36 0;
#X connect 8 0 10 1;
#X connect 9 0 10 0;
#X connect 10 0 25 0;
#X connect 11 0 22 1;
#X connect 12 0 22 0;
#X connect 13 0 21 0;
#X connect 14 0 21 0;
#X connect 15 0 19 0;
#X connect 17 0 0 0;
#X connect 18 0 15 1;
#X connect 19 0 9 0;
#X connect 19 0 9 1;
#X connect 19 0 27 0;
#X connect 19 0 28 1;
#X connect 19 1 8 0;
#X connect 19 1 8 1;
#X connect 19 1 27 1;
#X connect 19 1 28 2;
#X connect 20 0 17 0;
#X connect 21 0 26 0;
#X connect 22 0 25 1;
#X connect 23 0 2 0;
#X connect 23 0 4 0;
#X connect 23 0 37 0;
#X connect 24 0 0 1;
#X connect 25 0 28 0;
#X connect 25 0 29 0;
#X connect 26 0 23 1;
#X connect 26 0 7 1;
#X connect 27 0 29 1;
#X connect 27 1 29 2;
#X connect 27 2 35 0;
#X connect 27 3 34 0;
#X connect 28 0 20 0;
#X connect 28 0 3 1;
#X connect 28 0 2 1;
#X connect 28 1 20 1;
#X connect 28 1 1 1;
#X connect 28 1 4 1;
#X connect 29 0 14 0;
#X connect 29 0 14 1;
#X connect 29 0 23 0;
#X connect 29 1 13 0;
#X connect 29 1 13 1;
#X connect 29 1 7 0;
#X connect 30 0 17 1;
#X connect 31 0 15 0;
#X connect 32 0 45 0;
#X connect 33 0 29 4;
#X connect 38 0 39 0;
#X connect 40 0 26 1;
#X connect 41 0 46 0;
#X connect 42 0 11 0;
#X connect 42 0 11 1;
#X connect 42 0 28 4;
#X connect 45 0 29 3;
#X connect 46 0 12 0;
#X connect 46 0 12 1;
#X connect 46 0 28 3;
#X connect 47 0 40 0;
#X connect 48 0 38 0;
#X restore 56 258 pd fft;
#N canvas 0 110 895 586 hann-window 0;
#N canvas 0 22 450 300 (subpatch) 0;
#X array \$0-hann 2048 float 0;
#X coords 0 1 2047 0 300 100 1;
#X restore 156 358 graph;
#X obj 65 232 osc~;
#X obj 65 257 *~ -0.5;
#X obj 65 281 +~ 0.5;
#X obj 156 324 tabwrite~ \$0-hann;
#X obj 60 115 samplerate~;
#X obj 38 135 swap;
#X obj 38 155 /;
#X obj 38 95 t f b f;
#X msg 173 92 resize \$1;
#X obj 173 116 s \$0-hann;
#X msg 79 205 0;
#X obj 38 175 t f b;
#X obj 38 75 r \$0-window-size;
#X connect 1 0 2 0;
#X connect 2 0 3 0;
#X connect 3 0 4 0;
#X connect 5 0 6 1;
#X connect 6 0 7 0;
#X connect 6 1 7 1;
#X connect 7 0 12 0;
#X connect 8 0 6 0;
#X connect 8 1 5 0;
#X connect 8 2 9 0;
#X connect 9 0 10 0;
#X connect 11 0 1 1;
#X connect 12 0 1 0;
#X connect 12 1 4 0;
#X connect 12 1 11 0;
#X connect 13 0 8 0;
#X restore 498 108 pd hann-window;
#N canvas 52 71 802 548 tables 0;
#N canvas 0 22 450 300 (subpatch) 0;
#X array \$0-last-real 2048 float 0;
#X coords 0 500 2048 -500 200 150 1;
#X restore 103 15 graph;
#N canvas 0 22 450 300 (subpatch) 0;
#X array \$0-last-imag 2048 float 0;
#X coords 0 500 2048 500 200 150 1;
#X restore 497 6 graph;
#N canvas 0 22 450 300 (subpatch) 0;
#X array \$0-amp-real 2048 float 0;
#X coords 0 500 2048 -500 200 150 1;
#X restore 105 185 graph;
#N canvas 0 22 450 300 (subpatch) 0;
#X array \$0-amp-imag 2048 float 0;
#X coords 0 500 2048 -500 200 150 1;
#X restore 501 178 graph;
#N canvas 0 22 450 300 (subpatch) 0;
#X array \$0-inc-real 2048 float 0;
#X coords 0 1 2048 -1 200 150 1;
#X restore 105 357 graph;
#N canvas 0 22 450 300 (subpatch) 0;
#X array \$0-inc-imag 2048 float 0;
#X coords 0 1 2048 -1 200 150 1;
#X restore 503 342 graph;
#X restore 498 128 pd tables;
#X obj 203 314 s \$0-window-size;
#X text 14 38 from I08.pvoc.reverb.pd;
#X obj 263 217 * 0.01;
#X obj 16 198 *~;
#X obj 119 198 *~;
#X obj 56 238 *~;
#X obj 215 118 cos;
#X obj 264 118 sin;
#X obj 215 98 * 0.015708;
#X obj 264 158 line~;
#X obj 215 158 line~;
#X msg 215 138 \$1 30;
#X msg 264 138 \$1 30;
#X obj 490 254 pow;
#X msg 490 234 2 \$1;
#X obj 203 294 pow;
#X msg 203 274 2 \$1;
#X obj 16 18 mmm-module \$1 \$2 piano-reverb 3;
#X obj 215 68 mmm-ctrl \$1 \$2 1 dry-wet 0 100 50 int;
#X obj 263 187 mmm-ctrl \$1 \$2 2 reverb 1 1000 15 int;
#X obj 203 254 mmm-ctrl \$1 \$2 3 window 1 14 11 ext;
#X msg 282 17 version 0.3.4;
#X connect 0 0 14 0;
#X connect 0 0 12 0;
#X connect 1 0 14 0;
#X connect 1 0 13 0;
#X connect 2 0 0 0;
#X connect 3 0 1 0;
#X connect 6 0 5 0;
#X connect 6 0 4 0;
#X connect 11 0 6 1;
#X connect 12 0 5 0;
#X connect 13 0 4 0;
#X connect 14 0 6 0;
#X connect 15 0 20 0;
#X connect 16 0 21 0;
#X connect 17 0 16 0;
#X connect 17 0 15 0;
#X connect 18 0 14 1;
#X connect 19 0 13 1;
#X connect 19 0 12 1;
#X connect 20 0 19 0;
#X connect 21 0 18 0;
#X connect 22 0 29 1;
#X connect 23 0 22 0;
#X connect 24 0 9 0;
#X connect 25 0 24 0;
#X connect 27 0 17 0;
#X connect 28 0 11 0;
#X connect 29 0 25 0;
#X connect 29 2 23 0;
