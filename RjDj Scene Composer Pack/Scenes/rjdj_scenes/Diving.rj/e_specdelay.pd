#N canvas 135 70 1110 703 10;
#N canvas 177 100 1012 791 fft-analysis 0;
#X obj 20 126 *~;
#X obj 19 61 inlet~;
#X obj 20 150 rfft~;
#X obj 41 102 tabreceive~ \$0-hann;
#X obj 21 679 *~;
#X obj 212 647 tabreceive~ \$0-hann;
#X obj 21 596 rifft~;
#X obj 21 711 outlet~;
#X obj 43 335 wrap~;
#X obj 22 359 -~;
#X obj 22 410 /~ 44.1;
#X obj 21 635 /~ 64;
#X obj 23 257 tabreceive~ \$0-delay;
#X obj 158 366 *~;
#X obj 122 367 *~;
#X text 246 443 read out the delay and feedbackarrays for;
#X text 246 469 every audio block (= fft frame) and use the;
#X text 247 491 integer value of each delay bin as multiplier;
#X text 252 512 of the blocksize to calculate the pointer;
#X text 250 533 back into the vd~s before resynthesis.;
#X obj 201 385 samplerate~;
#X obj 201 363 loadbang;
#X msg 283 364 bang;
#X obj 201 407 / 1000;
#X obj 22 511 vd~ \$0-re;
#X obj 119 511 vd~ \$0-im;
#X text 275 211 write real and imaginary part into delay-buffer;
#X obj 231 23 tabreceive~ \$0-gain;
#X text 370 77 Just to show we're doing something \, we multiply each
channel by a gain controlled by an array in the main window. The control
is quartic-scaled for easy editing.;
#X obj 19 185 *~;
#X obj 61 185 *~;
#X obj 300 175 print~;
#X msg 316 148 bang;
#X floatatom 297 127 5 0 0 0 - - -;
#X obj 23 308 *~ 0.1;
#X obj 171 257 r \$0-delay-depth;
#X obj 171 279 * 0.1;
#X text 228 282 <-- set right scale for audio range effects;
#X obj 231 94 *~ 0.0125;
#X obj 288 48 r \$0-gain-depth;
#X obj 288 70 * 0.015;
#X obj 200 454 /;
#X msg 200 429 1 \$1;
#X obj 23 458 +~ 1;
#X text 67 466 1 sample min;
#X obj 16 7 block~ \$2 4;
#X obj 23 384 *~ \$2;
#X obj 60 212 delwrite~ \$0-im 100000;
#X obj 20 235 delwrite~ \$0-re 100000;
#X obj 138 320 tabreceive~ \$0-feedback;
#X text 299 328 normally:;
#X obj 120 712 outlet~;
#X obj 119 685 *~;
#N canvas 0 0 564 560 pan~ 0;
#X text 190 183 * ~M_PI/2;
#X obj 38 62 inlet~;
#X obj 39 351 outlet~;
#X obj 130 355 outlet~;
#X obj 130 324 *~;
#X obj 39 320 *~;
#X obj 117 60 inlet~;
#X obj 58 207 cos~;
#X obj 149 227 cos~;
#X obj 117 85 *~ 0.25;
#X obj 149 206 +~ 0.25;
#X connect 1 0 5 0;
#X connect 1 0 4 0;
#X connect 4 0 3 0;
#X connect 5 0 2 0;
#X connect 6 0 9 0;
#X connect 7 0 5 1;
#X connect 8 0 4 1;
#X connect 9 0 7 0;
#X connect 9 0 10 0;
#X connect 10 0 8 0;
#X restore 22 657 pd pan~;
#X obj 69 626 tabreceive~ \$0-pan;
#X obj 59 573 *~;
#X obj 23 574 *~;
#X obj 55 533 tabreceive~ \$0-gain;
#X connect 0 0 2 0;
#X connect 1 0 0 0;
#X connect 2 0 29 0;
#X connect 2 1 30 0;
#X connect 3 0 0 1;
#X connect 4 0 7 0;
#X connect 5 0 4 1;
#X connect 5 0 52 1;
#X connect 6 0 11 0;
#X connect 8 0 9 1;
#X connect 9 0 46 0;
#X connect 10 0 43 0;
#X connect 11 0 53 0;
#X connect 12 0 34 0;
#X connect 13 0 47 0;
#X connect 14 0 48 0;
#X connect 20 0 23 0;
#X connect 21 0 20 0;
#X connect 22 0 20 0;
#X connect 23 0 10 1;
#X connect 23 0 42 0;
#X connect 24 0 14 0;
#X connect 24 0 56 0;
#X connect 25 0 13 0;
#X connect 25 0 55 0;
#X connect 27 0 38 0;
#X connect 29 0 48 0;
#X connect 30 0 47 0;
#X connect 32 0 31 0;
#X connect 34 0 8 0;
#X connect 34 0 9 0;
#X connect 35 0 36 0;
#X connect 36 0 34 1;
#X connect 38 0 30 1;
#X connect 38 0 29 1;
#X connect 39 0 40 0;
#X connect 40 0 38 1;
#X connect 41 0 43 1;
#X connect 42 0 41 0;
#X connect 43 0 24 0;
#X connect 43 0 25 0;
#X connect 46 0 10 0;
#X connect 49 0 14 1;
#X connect 49 0 13 1;
#X connect 52 0 51 0;
#X connect 53 0 4 0;
#X connect 53 1 52 0;
#X connect 54 0 53 1;
#X connect 55 0 6 1;
#X connect 56 0 6 0;
#X connect 57 0 56 1;
#X connect 57 0 55 1;
#X restore 52 492 pd fft-analysis;
#N canvas 35 66 600 441 Hann-window 0;
#N canvas 0 0 450 300 (subpatch) 0;
#X array \$0-hann 512 float 0;
#X coords 0 1 511 0 200 120 1;
#X restore 293 249 graph;
#X msg 171 263 0;
#X obj 65 312 osc~;
#X obj 65 264 samplerate~;
#X obj 65 335 *~ -0.5;
#X obj 65 358 +~ 0.5;
#X obj 57 383 tabwrite~ \$0-hann;
#X text 279 241 1;
#X text 272 359 0;
#X text 288 372 0;
#X obj 57 241 bng 15 250 50 0 empty empty empty 0 -6 0 8 -262144 -1
-1;
#X text 336 221 Hann window;
#X text 113 310 period 512;
#X text 90 215 recalculate Hann;
#X text 125 230 window table;
#X obj 57 76 loadbang;
#X msg 79 179 \; pd dsp 1;
#X text 40 27 The Hann window is now recomputed on 'loadbang' to make
the file smaller (it doesn't have to be saved with the array.);
#X text 474 375 511;
#X obj 65 288 / \$2;
#X msg 188 159 resize \$1;
#X obj 188 187 s \$0-hann;
#X obj 188 135 f \$2;
#X obj 57 104 t b b b;
#X connect 1 0 2 1;
#X connect 2 0 4 0;
#X connect 3 0 19 0;
#X connect 4 0 5 0;
#X connect 5 0 6 0;
#X connect 10 0 3 0;
#X connect 10 0 1 0;
#X connect 10 0 6 0;
#X connect 15 0 23 0;
#X connect 19 0 2 0;
#X connect 20 0 21 0;
#X connect 22 0 20 0;
#X connect 23 0 10 0;
#X connect 23 1 16 0;
#X connect 23 2 22 0;
#X restore 170 493 pd Hann-window;
#N canvas 0 0 454 304 (subpatch) 0;
#X array \$0-delay 512 float 2;
#X coords 0 1024 512 0 512 60 1;
#X restore 26 158 graph;
#X text 12 150 2;
#N canvas 0 0 450 300 (subpatch) 0;
#X array \$0-feedback 512 float 2;
#X coords 0 1 512 0 512 60 1;
#X restore 26 254 graph;
#X text 12 310 0;
#X text 10 250 1;
#X text 28 78 in each individual bin.;
#X text 30 63 The two arrays below are for setting the delay and feedback
;
#X text 198 2 SPECTRAL DELAY;
#X text 28 99 See the fft-analysis subpatch for details how it is done.
;
#X text 26 23 Example patch for spectral delay \, utilizing Miller
;
#X text 27 38 Puckette's patch on Fourier Resynthesis.;
#N canvas 0 0 450 300 (subpatch) 0;
#X array \$0-gain 512 float 2;
#X coords 0 1 512 -0.01 512 60 1;
#X restore 25 350 graph;
#X text 12 403 0;
#X text 12 344 1;
#X text 25 413 0;
#X text 518 411 22K;
#X obj 51 513 outlet~;
#X floatatom 501 237 5 0 0 2 fb-sin - -;
#X floatatom 501 140 5 0 0 2 del-sin - -;
#N canvas 263 255 731 423 fb-sin 0;
#X obj 235 157 t a a;
#X obj 237 287 tabwrite \$0-feedback;
#X obj 236 206 cos;
#X obj 236 182 / 20;
#X obj 236 230 + 1;
#X floatatom 296 164 5 0 0 0 - - -;
#X obj 239 73 t b a;
#X obj 424 46 inlet;
#X obj 236 261 / 2.5;
#X text 124 263 don't go to 1:;
#N canvas 0 0 450 300 count 0;
#X obj 101 155 f 0;
#X obj 133 155 + 1;
#X obj 101 79 t a b;
#X obj 103 111 until;
#X obj 162 112 0;
#X obj 103 27 inlet;
#X obj 102 192 outlet;
#X connect 0 0 1 0;
#X connect 0 0 6 0;
#X connect 1 0 0 1;
#X connect 2 0 3 0;
#X connect 2 1 4 0;
#X connect 3 0 0 0;
#X connect 4 0 0 1;
#X connect 5 0 2 0;
#X restore 234 129 pd count;
#X msg 237 104 2048;
#X obj 484 124 t b a;
#X obj 517 169 osc~;
#X obj 491 238 tabwrite~ \$0-feedback;
#X obj 525 190 *~ 0.5;
#X obj 520 214 +~ 0.5;
#X obj 489 97 random 2000;
#X msg 494 69 bang;
#X connect 0 0 3 0;
#X connect 0 1 1 1;
#X connect 2 0 4 0;
#X connect 3 0 2 0;
#X connect 4 0 8 0;
#X connect 5 0 3 1;
#X connect 6 0 11 0;
#X connect 6 1 3 1;
#X connect 7 0 12 0;
#X connect 8 0 1 0;
#X connect 10 0 0 0;
#X connect 11 0 10 0;
#X connect 12 0 14 0;
#X connect 12 1 13 0;
#X connect 13 0 15 0;
#X connect 15 0 16 0;
#X connect 16 0 14 0;
#X connect 17 0 12 0;
#X connect 18 0 17 0;
#X restore 630 251 pd fb-sin;
#X obj 541 160 vsl 15 55 0 1024 0 0 empty empty empty 0 -9 0 10 -262144
-1 -1 0 1;
#X obj 719 240 s \$0-delay;
#X msg 719 218 const \$1;
#X obj 540 256 vsl 15 55 0 1 0 0 empty empty empty 0 -9 0 10 -262144
-1 -1 0 1;
#X obj 711 339 s \$0-feedback;
#X msg 711 314 const \$1;
#X obj 542 352 vsl 15 55 0 1 0 0 empty empty empty 0 -9 0 10 -262144
-1 -1 0 1;
#X msg 723 410 const \$1;
#X obj 723 435 s \$0-gain;
#X floatatom 500 333 5 0 0 2 gain-sin - -;
#N canvas 492 383 519 433 gain-sin 0;
#X obj 82 151 t a a;
#X obj 83 200 cos;
#X obj 83 176 / 20;
#X obj 83 224 + 1;
#X obj 83 255 / 2;
#X floatatom 143 158 5 0 0 0 - - -;
#X obj 86 87 t b a;
#X obj 201 50 inlet;
#X obj 84 281 tabwrite \$0-gain;
#N canvas 0 0 450 300 count512 0;
#X obj 101 155 f 0;
#X obj 133 155 + 1;
#X obj 101 79 t a b;
#X obj 103 111 until;
#X obj 162 112 0;
#X obj 103 27 inlet;
#X obj 102 192 outlet;
#X msg 101 51 512;
#X connect 0 0 1 0;
#X connect 0 0 6 0;
#X connect 1 0 0 1;
#X connect 2 0 3 0;
#X connect 2 1 4 0;
#X connect 3 0 0 0;
#X connect 4 0 0 1;
#X connect 5 0 7 0;
#X connect 7 0 2 0;
#X restore 81 123 pd count512;
#X obj 263 129 t b a;
#X obj 296 174 osc~;
#X obj 304 195 *~ 0.5;
#X obj 299 219 +~ 0.5;
#X obj 268 102 random 2000;
#X msg 273 74 bang;
#X obj 270 243 tabwrite~ \$0-gain;
#X connect 0 0 2 0;
#X connect 0 1 8 1;
#X connect 1 0 3 0;
#X connect 2 0 1 0;
#X connect 3 0 4 0;
#X connect 4 0 8 0;
#X connect 5 0 2 1;
#X connect 6 0 9 0;
#X connect 6 1 2 1;
#X connect 7 0 10 0;
#X connect 9 0 0 0;
#X connect 10 0 16 0;
#X connect 10 1 11 0;
#X connect 11 0 12 0;
#X connect 12 0 13 0;
#X connect 13 0 16 0;
#X connect 14 0 10 0;
#X connect 15 0 14 0;
#X restore 621 347 pd gain-sin;
#X obj 52 472 inlet~;
#X text 64 558 Based on patches by MSP \, Johannes Kreidler \, Orm
Finnendahl;
#X text 12 215 0;
#X obj 128 233 hsl 64 12 0 1 0 1 \$0-delay-depth \$0-delay-depth delay-depth
4 6 1 8 -262144 -258699 -1 1890 1;
#X obj 130 329 hsl 64 12 0 1 0 1 \$0-gain-depth empty gain-depth 4
6 1 8 -262144 -258699 -1 6300 1;
#X obj 832 42 inlet;
#X obj 832 70 u_dispatch \$0 delay-depth;
#X obj 832 119 u_dispatch \$0 gain;
#X obj 832 141 u_dispatch \$0 feedpole;
#X obj 832 166 u_dispatch \$0 gainpole;
#X obj 626 104 loadbang;
#X obj 832 94 u_dispatch \$0 feedback;
#X obj 832 189 u_dispatch \$0 delsin;
#X obj 502 95 r \$0-delsin;
#X obj 879 41 u_loader e_specdelay \$0;
#N canvas 324 75 623 563 pan-sin 0;
#X obj 44 238 sin;
#X obj 43 189 t a a;
#X obj 44 214 / 10;
#X floatatom 120 197 5 0 0 0 - - -;
#X obj 47 95 t b a;
#X obj 47 70 inlet;
#N canvas 0 0 450 300 count 0;
#X obj 101 155 f 0;
#X obj 133 155 + 1;
#X obj 101 79 t a b;
#X obj 103 111 until;
#X obj 162 112 0;
#X obj 103 27 inlet;
#X obj 102 192 outlet;
#X connect 0 0 1 0;
#X connect 0 0 6 0;
#X connect 1 0 0 1;
#X connect 2 0 3 0;
#X connect 2 1 4 0;
#X connect 3 0 0 0;
#X connect 4 0 0 1;
#X connect 5 0 2 0;
#X restore 42 161 pd count;
#X obj 44 319 tabwrite \$0-pan;
#X obj 43 286 + 0.5;
#X obj 44 260 * 0.3;
#X msg 46 130 512;
#X connect 0 0 9 0;
#X connect 1 0 2 0;
#X connect 1 1 7 1;
#X connect 2 0 0 0;
#X connect 3 0 2 1;
#X connect 4 0 10 0;
#X connect 4 1 2 1;
#X connect 5 0 4 0;
#X connect 6 0 1 0;
#X connect 8 0 7 0;
#X connect 9 0 8 0;
#X connect 10 0 6 0;
#X restore 719 554 pd pan-sin;
#X floatatom 719 534 5 0 0 0 - - -;
#X obj 832 215 u_dispatch \$0 pansin;
#X obj 154 519 outlet~;
#X obj 719 509 r \$0-pansin;
#X msg 665 127 0.37;
#X msg 624 124 -40;
#X obj 832 241 u_dispatch \$0 fbsin;
#X obj 577 220 r \$0-fbsin;
#X obj 863 355 noise~;
#X obj 863 497 tabwrite~ \$0-gain;
#X msg 957 463 bang;
#X obj 864 467 clip~ 0 1;
#X obj 864 523 noise~;
#X msg 963 616 bang;
#X obj 864 645 tabwrite~ \$0-feedback;
#X obj 832 262 u_dispatch \$0 randgain;
#X obj 832 282 u_dispatch \$0 randfeed;
#X obj 957 440 r \$0-randgain;
#X obj 963 595 r \$0-randfeed;
#X obj 865 615 clip~ 0 0.98;
#X obj 574 544 table \$0-pan 512;
#X obj 864 403 lop~ 200;
#X obj 863 379 lop~ 200;
#X obj 864 434 *~ 5;
#X obj 865 547 lop~ 200;
#X obj 865 571 lop~ 200;
#X obj 865 592 *~ 8;
#X obj 832 302 u_dispatch \$0 gain-sin;
#X obj 599 321 r \$0-gain-sin;
#N canvas 556 135 623 563 del-sin 0;
#X obj 45 319 tabwrite \$0-delay;
#X obj 44 238 sin;
#X obj 43 189 t a a;
#X obj 44 214 / 10;
#X obj 46 262 + 1;
#X obj 47 291 * 512;
#X floatatom 120 197 5 0 0 0 - - -;
#X obj 47 95 t b a;
#X obj 263 59 inlet;
#N canvas 0 0 450 300 count 0;
#X obj 101 155 f 0;
#X obj 133 155 + 1;
#X obj 101 79 t a b;
#X obj 103 111 until;
#X obj 162 112 0;
#X obj 103 27 inlet;
#X obj 102 192 outlet;
#X connect 0 0 1 0;
#X connect 0 0 6 0;
#X connect 1 0 0 1;
#X connect 2 0 3 0;
#X connect 2 1 4 0;
#X connect 3 0 0 0;
#X connect 4 0 0 1;
#X connect 5 0 2 0;
#X restore 42 161 pd count;
#X msg 46 130 512;
#X obj 263 88 t b a;
#X obj 296 133 osc~;
#X obj 270 202 tabwrite~ \$0-delay;
#X msg 325 38 bang;
#X obj 305 154 *~ 512;
#X obj 300 178 +~ 512;
#X obj 327 63 random 2000;
#X connect 1 0 4 0;
#X connect 2 0 3 0;
#X connect 2 1 0 1;
#X connect 3 0 1 0;
#X connect 4 0 5 0;
#X connect 5 0 0 0;
#X connect 6 0 3 1;
#X connect 7 0 10 0;
#X connect 7 1 3 1;
#X connect 8 0 11 0;
#X connect 9 0 2 0;
#X connect 10 0 9 0;
#X connect 11 0 13 0;
#X connect 11 1 12 0;
#X connect 12 0 15 0;
#X connect 14 0 17 0;
#X connect 15 0 16 0;
#X connect 16 0 13 0;
#X connect 17 0 11 0;
#X restore 628 154 pd del-sin;
#X connect 0 0 18 0;
#X connect 0 1 51 0;
#X connect 19 0 21 0;
#X connect 20 0 78 0;
#X connect 22 0 24 0;
#X connect 24 0 23 0;
#X connect 25 0 27 0;
#X connect 27 0 26 0;
#X connect 28 0 29 0;
#X connect 29 0 30 0;
#X connect 31 0 32 0;
#X connect 33 0 0 0;
#X connect 38 0 39 0;
#X connect 39 0 44 0;
#X connect 40 0 41 0;
#X connect 41 0 42 0;
#X connect 42 0 45 0;
#X connect 43 0 54 0;
#X connect 44 0 40 0;
#X connect 45 0 50 0;
#X connect 46 0 20 0;
#X connect 49 0 48 0;
#X connect 50 0 55 0;
#X connect 52 0 49 0;
#X connect 54 0 20 0;
#X connect 55 0 64 0;
#X connect 56 0 19 0;
#X connect 57 0 71 0;
#X connect 59 0 58 0;
#X connect 60 0 58 0;
#X connect 61 0 73 0;
#X connect 62 0 63 0;
#X connect 64 0 65 0;
#X connect 65 0 76 0;
#X connect 66 0 59 0;
#X connect 67 0 62 0;
#X connect 68 0 63 0;
#X connect 70 0 72 0;
#X connect 71 0 70 0;
#X connect 72 0 60 0;
#X connect 73 0 74 0;
#X connect 74 0 75 0;
#X connect 75 0 68 0;
#X connect 77 0 32 0;
#X coords 0 -1 1 1 560 320 1 10 120;
